<ion-header>
  <ion-toolbar hideBackButton>
    <ion-buttons start>
      <button ion-button icon-only (click)="logout()">
        <ion-icon name="arrow-back"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title text-center *ngIf="!judgeId || judgeId == 'null'" class="config-error-msg">
      <ion-icon name="alert" color="danger"></ion-icon>Votre feuille n'a pas été configurée correctement, veuillez vous réferer au scrutateur.
    </ion-title>
    <ion-title text-center *ngIf="judgeId">
      <ion-icon name="paper"></ion-icon>Feuille Juge <span class="uppercase">{{ judgeId }}</span> -
      <span class="uppercase danse-name">{{ danse }}</span>
    </ion-title>
    <ion-buttons end>
      <button ion-button icon-only>
        <!--<ion-icon name="lock"></ion-icon>-->
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <form *ngIf="scoresForm" [formGroup]="scoresForm">
    <ion-grid>
      <ion-row *ngIf="dossardsAliases1">
        <ion-col col-2></ion-col>
        <ion-col col-2 class="dossard" *ngFor="let dossardAlias of dossardsAliases1">
          <span class="number">{{ dossardAlias }}</span>
        </ion-col>
      </ion-row>
      <ion-row *ngFor="let critere of criteria">
        <ion-col col-2><span class="uppercase">{{ critere }}</span></ion-col>
        <ion-col col-2 class="rate" *ngFor="let indexDossard of [0, 1, 2, 3, 4];">
          <ion-input type="number" formControlName="{{critere + indexDossard}}" placeholder="note" [(ngModel)]="dossards[indexDossard][critere]"
            [ngClass]="{'invalid': scroresForm && !scroresForm.controls[critere + indexDossard].valid}" (ionChange)="inputChanged()"></ion-input>
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-grid>
      <ion-row class="dossardsAliases2">
        <ion-col col-2></ion-col>
        <ion-col col-2 class="dossard" *ngFor="let dossardAlias of dossardsAliases2">
          <span class="number">{{ dossardAlias }}</span>
        </ion-col>
      </ion-row>
      <ion-row *ngFor="let critere of criteria">
        <ion-col col-2><span class="uppercase">{{ critere }}</span></ion-col>
        <ion-col col-2 class="rate" *ngFor="let indexDossard of [5, 6, 7, 8, 9];">
          <ion-input type="number" *ngIf="criteria" formControlName="{{critere + indexDossard}}" placeholder="note" [(ngModel)]="dossards[indexDossard][critere]"
            [ngClass]="{'invalid': scroresForm && !scroresForm.controls[critere + indexDossard].valid}" (ionChange)="inputChanged()"></ion-input>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>

<ion-footer>
  <ion-row *ngIf="criteriaLongObj">
    <ion-col col-2 class="legend" *ngFor="let critere of criteriaLongObj">
      <strong>{{ critere.short }}:</strong> {{ critere.name }}
    </ion-col>
  </ion-row>
</ion-footer>